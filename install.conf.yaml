- defaults:
    link:
      force: true

- shell:
    - rm -rf gen && mkdir gen
    - curl -L https://iterm2.com/shell_integration/zsh -o gen/iterm2.zsh
    - curl -L https://raw.githubusercontent.com/Homebrew/install/master/install.sh -o gen/install_homebrew.sh
    - curl -L https://raw.githubusercontent.com/nvm-sh/nvm/v0.35.3/install.sh -o gen/install_nvm.sh
    - curl -L https://raw.githubusercontent.com/ohmyzsh/ohmyzsh/master/tools/install.sh -o gen/install_ohmyzsh.sh
    - curl -L https://github.com/sarneeh/alfred-vscode/archive/v2.2.0.zip -o gen/alfred-vscode.zip
    - curl -L https://download.jetbrains.com/fonts/JetBrainsMono-1.0.3.zip -o gen/jetbrains-mono.zip
    - unzip src/Alfred.alfredpreferences.zip -d gen/alfred
    - unzip gen/alfred-vscode.zip -d gen/alfred-vscode
    - unzip gen/jetbrains-mono.zip -d gen/jetbrains-mono
    - mv gen/jetbrains-mono/JetBrainsMono-1.0.3/ttf/* ~/Library/Fonts
    - rm gen/alfred-vscode.zip
    - rm gen/jetbrains-mono.zip

- shell:
    - sh gen/install_homebrew.sh
    
    - brew install zsh
    - brew install z
    - brew install yarn
    - brew install git
    - brew install jq
    - brew install httpie
    - brew install dockutil
    - brew cask install google-chrome --force
    - brew cask install visual-studio-code --force
    - brew cask install insomnia --force
    - brew cask install alfred --force
    - brew cask install optimage --force
    - brew cask install kap --force
    - brew cask install spotify --force
    - brew cask install iterm2 --force
    - brew cask install rocket --force
    - brew cask install 1password --force
    - brew cask install dash --force

    - sh gen/install_nvm.sh
    - rm -rf "$HOME/.oh-my-zsh"
    - sh gen/install_ohmyzsh.sh
    - curl -L https://raw.githubusercontent.com/jackharrisonsherlock/common/master/common.zsh-theme -o ~/.oh-my-zsh/custom/themes/common.zsh-theme

- link:
    ~/.zshrc: src/zshrc
    ~/.gitignore: src/gitignore
    ~/.gitconfig: src/gitconfig
    ~/.iterm2.zsh: gen/iterm2.zsh

- shell:
    - chsh -s /bin/zsh
    - source ~/.zshrc

- shell:
    - dockutil --remove all
    - defaults write com.apple.dock autohide -int 1
    - defaults write com.apple.dock autohide-time-modifier -float 0.25
    - defaults write com.apple.dock autohide-delay -int 0
    - defaults write com.apple.dock largesize -int 55
    - defaults write com.apple.dock magnification -int 1
    - defaults write com.apple.dock show-recents -int 0
    - defaults write com.apple.dock tilesize -int 48
    - killall Dock
    - dockutil --add '/Applications/Google Chrome.app'
    - dockutil --add '/Applications/iTerm.app'
    - dockutil --add '/Applications/Visual Studio Code.app'
    - dockutil --add '/Applications/Spotify.app'
    - dockutil --add '/Applications/Insomnia.app'
